# 競合バナー分析アプリ

競合バナーの構成要素・訴求・示唆を分析するアプリケーション

## 設計原則

- **推測しない／断定しない／根拠を必ず紐付ける**
- 勝ちパターンを決めるのではなく、現在の広告表現の「当たり前」を把握すること
- マーケターの判断を代替せず、考えるための材料を整理する

## 機能

### MVP機能

- **入力**: バナー画像（複数枚アップロード可）
- **出力**: A→B→C1→C2→Dの順で生成

#### A. Extraction（抽出）
JSONスキーマ固定で、各バナーの構成要素・訴求・分類を抽出
- banner_id, brand, channel, format
- components[]（要素、テキスト、bbox）
- appeal_axes[]（訴求軸、根拠テキスト+bbox必須）
- tone（断定せず候補として）
- notes（事実のみ）
- confidence（根拠量にもとづく説明可能なルール）

#### B. Aggregation（市場の当たり前）
複数バナーのExtractionを集計し、事実のみを提示
- componentsの出現率
- appeal_axesの出現率
- よくあるcomponents×appeal_axesの組み合わせ
- ブランド別の構成差分（差分がある場合のみ）
- フィルタ機能（訴求軸/要素/ブランド）

#### C1. Market Insight（市場インサイト）
Bの結果から「市場で共有されている前提・当たり前」を抽出
- 観測された事実（Bの数値・分布）
- そこから言える市場の前提（仮説表現）
- クリックで根拠となるバナーをハイライト

#### C2. Strategy Options（自社の選択肢）
C1のMarket Insightから、自社の選択肢を生成
- Option A：市場に同調する
- Option B：部分的にずらす
- Option C：あえて外す
- 各Optionに含める：参考要素、使わない要素、メリット/リスク（仮説）、想定ペルソナ

#### D. Planning Hooks（企画への接続）
各Strategy Optionから、バナー/LP企画のための「考えるフック」を生成
- このOptionを取るなら、FVで何を一番に伝えるか
- どの要素は説明不要で、どこは説明が必要か
- 誤解されやすいポイント
- ペルソナとの整合性

### UI

- **左サイドバー**: 画像一覧＋フィルタ（訴求軸/要素）+ ハイライト表示
- **右側**: 5つのタブで段階的に分析結果を表示
  - **個別分析 (A)**: 選択画像のExtraction結果（bboxでハイライト）
  - **集計 (B)**: 市場の当たり前（出現率、組み合わせ、ブランド別差分）+ フィルタ
  - **市場インサイト (C1)**: 事実→仮説のペア表示、クリックで根拠バナーをハイライト
  - **戦略オプション (C2)**: Option A/B/Cを並列提示
  - **企画フック (D)**: 各Optionの思考の起点
- **エクスポート**: A/BをJSONで

## 技術スタック

- Next.js 14
- TypeScript
- Tailwind CSS
- react-dropzone

## セットアップ

```bash
# 依存関係のインストール
npm install

# 開発サーバー起動
npm run dev
```

ブラウザで http://localhost:3000 を開く

## 使用方法

1. 画像をドラッグ&ドロップまたはクリックして選択
2. 左側の画像一覧から分析したい画像を選択
3. 右側でExtraction（A）の結果を確認（bboxがハイライト表示）
4. 「集計・示唆」タブでAggregation（B）とInsights（C）を確認
5. 「エクスポート」ボタンでA/BのJSONデータをダウンロード

## 注意事項

- 現在はダミーデータを使用しています
- 実際の画像解析機能（OCR・画像認識）は未実装です
- BBoxは画像上に色付きの枠線で表示されます
- クリックするとハイライトが切り替わります
- Market Insight (C1)でインサイトをクリックすると、根拠となるバナーが左サイドバーで黄色くハイライトされます

## 設計原則

- **推測しない／断定しない／根拠を必ず紐付ける**
- 勝ちパターンを決めるのではなく、現在の広告表現の「当たり前」を把握する
- マーケターの判断を代替せず、考えるための材料を整理する
- 事実→仮説の順で必ず提示
- 正解を決めず、選択肢として並列提示
